<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5. 顔認証 &mdash; CHiBi-CHiLO V2.1 ドキュメント</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="6. 用語集" href="Glossary.html" />
    <link rel="prev" title="4. ZOOM連携機能" href="Zoom.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CHiBi-CHiLO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">1. CHiBi-CHiLO 設計文書</a></li>
<li class="toctree-l1"><a class="reference internal" href="Database.html">2. DataBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logs.html">3. 視聴ログ出力機能</a></li>
<li class="toctree-l1"><a class="reference internal" href="Zoom.html">4. ZOOM連携機能</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. 顔認証</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">5.1. 概要</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">5.2. 顔認証システムの処理について</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">5.2.1. 顔画像サーバーの処理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#moodle">5.2.2. Moodleプラグインの処理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#web">5.2.3. Webカメラ制御プログラムの処理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">5.2.4. エラー処理</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">5.3. 検討事項</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">6. 用語集</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CHiBi-CHiLO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">5. </span>顔認証</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/face.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">5. </span>顔認証<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク"></a></h1>
<section id="id2">
<h2><span class="section-number">5.1. </span>概要<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク"></a></h2>
<p>想定している顔認証システムは， Moodleプラグイン，Webカメラ制御プログラム，顔画像サーバーから構成される（図1）．
本開発の範囲は図1のうち顔画像サーバー部分とする．</p>
<img alt="_images/image4.png" src="_images/image4.png" />
<p>図1：顔認証システム概要</p>
<ol class="arabic simple">
<li><p>修了試験は，Moodleの標準モジュールである小テストモジュールを利用する．</p></li>
<li><p>Moodleプラグインは，Moodle小テストモジュールに対するアクセスを制御する．</p></li>
<li><p>Webカメラの制御は， Web制御プログラムによりWebブラウザが行う．また，顔認証は，別途設置する顔画像サーバーにより提供する．</p></li>
<li><p>顔画像サーバーはMoodleプラグインから，教育ITの標準規格であるIMS LTI （以下，LTI）で呼び出され，外部の顔認証APIに画像の比較を依頼し，その結果を受け取ってLTIにて顔認証結果をMoodleに返す．</p></li>
</ol>
</section>
<section id="id3">
<h2><span class="section-number">5.2. </span>顔認証システムの処理について<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク"></a></h2>
<p>想定している顔認証システムの処理を図2に示す．</p>
<img alt="_images/image5.png" src="_images/image5.png" />
<p>図2： 顔認証システムのプロセス</p>
<section id="id4">
<h3><span class="section-number">5.2.1. </span>顔画像サーバーの処理<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク"></a></h3>
<p>本開発範囲である顔画像サーバーの処理は以下の通りである．
1. MoodleプラグインからLTIにより受講者ID等の学習者の属性情報を受け取る．
2. 登録画像がなければ，登録を求める．
3. Webカメラ制御プログラムからカメラ画像を照合画像として，受け取る．
4. 学習者のIDを手がかりにして顔画像データーベースから登録画像を取り出しカメラ画像と共に顔認証APIに送信し，顔認証の問い合わせを行う．
5. 顔認証APIの問合せ結果を，LTI経由で，Moodleプラグインに返す．
6. 認証結果を，受講者ID，講習ID，照合画像，タイムスタンプと共に顔データベースに記録する．</p>
</section>
<section id="moodle">
<h3><span class="section-number">5.2.2. </span>Moodleプラグインの処理<a class="headerlink" href="#moodle" title="このヘッドラインへのパーマリンク"></a></h3>
<p>Moodleプラグインの処理を参考までに記載する．
Moodleプラグインでは顔認証機能等を実装せず，小テストモジュールと顔画像サーバーの通信を以下のように媒介する．</p>
<ol class="arabic simple">
<li><p>Moodleの小テストモジュールにて，試験が開始されると，Moodleプラグインが呼び出される．</p></li>
<li><p>Moodleプラグインは，Webカメラ制御プログラムを呼び出し，カメラ画像の撮影を依頼する．その後，カメラ画像はWebカメラ制御プログラムが直接顔画像サーバーに渡すため，Moodleプラグインはカメラ画像の送受信に関与しない．</p></li>
<li><p>Moodleプラグインは，顔画像サーバーに対して，LTIプロトコルにて接続します．LTIの機能により，学習者がMoodleにログインしていると，受講者ID，講習IDなどの情報が顔画像サーバーに渡る．</p></li>
<li><p>顔画像サーバーが認証の可否をMoodleプラグインに伝える．</p></li>
<li><p>Moodleプラグインは，認証結果の成功を受け取ると，Moodle小テストモジュールに学習者のアクセス許可を与える．失敗した場合には，テスト開始時には，再度の認証を要求し．試験実施中は認証結果が失敗していても再認証は要求しない．</p></li>
</ol>
</section>
<section id="web">
<h3><span class="section-number">5.2.3. </span>Webカメラ制御プログラムの処理<a class="headerlink" href="#web" title="このヘッドラインへのパーマリンク"></a></h3>
<p>Webカメラの制御は，Webブラウザから行うこととし，開発ツールとしてWebRTCを利用する．
1. webカメラ制御プログラムは，Moodleプラグインからカメラ画像の撮影依頼を受け取る．
2. Webでカメラ撮影を実施する．
3. 撮影されたカメラ画像を顔画像サーバーに送信する．</p>
</section>
<section id="id5">
<h3><span class="section-number">5.2.4. </span>エラー処理<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク"></a></h3>
<p>以下のエラー処理を行うことを想定している．なお，この処理は，小テストモジュールが最初に認証を求めた時点（試験の開始時）でのみ行う．</p>
<ol class="arabic simple">
<li><p>顔認証に失敗し，試験が開始できないというエラーを返す．</p></li>
<li><p>正しい位置でカメラに向かうようアラートを表示する．</p></li>
<li><p>上記②のアラートを特定回数表示し，それでも認証されない場合は，顔画像の再登録申請をするか問い合わせるアラートを表示する</p></li>
</ol>
</section>
</section>
<section id="id6">
<h2><span class="section-number">5.3. </span>検討事項<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク"></a></h2>
<ul class="simple">
<li><p>Webカメラ制御プログラムの開発を行わず，顔認証サーバーの開発がおこなえるのか</p></li>
<li><p>開発範囲として，エラー処理の配慮まで必要なのか</p></li>
<li><p>LTIプロトコル対応に開発工数は発生するのか</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Zoom.html" class="btn btn-neutral float-left" title="4. ZOOM連携機能" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Glossary.html" class="btn btn-neutral float-right" title="6. 用語集" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, CCC-TIES.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>